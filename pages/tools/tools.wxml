<!--pages/tools/tools.wxml-->
<view class="container">
  <!-- åˆ†é¡µé€‰æ‹© -->
  <view class="tab-container">
    <view class="tab-item {{currentTab === 'tire_pressure' ? 'active' : ''}}" 
          bindtap="switchTab" data-tab="tire_pressure">
      èƒå‹åŠ©æ‰‹
    </view>
    <view class="tab-item {{currentTab === 'tool2' ? 'active' : ''}}" 
          bindtap="switchTab" data-tab="tool2">
      å·¥å…·2
    </view>
    <view class="tab-item {{currentTab === 'tool3' ? 'active' : ''}}" 
          bindtap="switchTab" data-tab="tool3">
      å·¥å…·3
    </view>
  </view>

  <!-- èƒå‹åŠ©æ‰‹åˆ†é¡µ -->
  <view class="tab-content" wx:if="{{currentTab === 'tire_pressure'}}">
    <!-- é¡µé¢æ ‡é¢˜ -->
    <view class="page-header">
      <text class="page-title">èƒå‹åŠ©æ‰‹</text>
      <text class="page-subtitle">çœŸç©ºèƒèƒå‹æ¨è</text>
    </view>

  <!-- è¾“å…¥åŒºåŸŸ -->
  <view class="input-section">
    <!-- ä½“é‡è¾“å…¥ -->
    <view class="input-group">
      <text class="input-label">éª‘æ‰‹ä½“é‡ (kg)</text>
      <input 
        class="weight-input" 
        type="number" 
        placeholder="è¯·è¾“å…¥ä½“é‡ (40-120kg)"
        value="{{riderWeight}}"
        bindinput="onWeightInput"
        maxlength="3"
      />
      <text class="input-hint">{{weightHint}}</text>
    </view>

    <!-- è½¦å‹é€‰æ‹© -->
    <view class="input-group">
      <text class="input-label">è½¦å‹ç±»å‹</text>
      <view class="picker-container">
        <picker 
          bindchange="onBikeStyleChange" 
          value="{{selectedBikeStyle}}" 
          range="{{bikeStyles}}" 
          range-key="name"
        >
          <view class="picker-display">
            <text>{{bikeStyles[selectedBikeStyle].name}}</text>
            <text class="picker-arrow">â–¼</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- è½®åœˆç±»å‹é€‰æ‹© -->
    <view class="input-group">
      <text class="input-label">è½®åœˆç±»å‹</text>
      <view class="picker-container">
        <picker 
          bindchange="onBikeTypeChange" 
          value="{{selectedBikeType}}" 
          range="{{bikeTypes}}" 
          range-key="name"
        >
          <view class="picker-display">
            <text>{{bikeTypes[selectedBikeType].name}}</text>
            <text class="picker-arrow">â–¼</text>
          </view>
        </picker>
      </view>
      <text class="input-hint">{{bikeTypeHint}}</text>
    </view>

    <!-- è·¯é¢ç±»å‹é€‰æ‹© -->
    <view class="input-group">
      <text class="input-label">ä¸»è¦è·¯é¢ç±»å‹</text>
      <view class="picker-container">
        <picker 
          bindchange="onSurfaceTypeChange" 
          value="{{selectedSurfaceType}}" 
          range="{{surfaceTypes}}" 
          range-key="name"
        >
          <view class="picker-display">
            <text>{{surfaceTypes[selectedSurfaceType].name}}</text>
            <text class="picker-arrow">â–¼</text>
          </view>
        </picker>
      </view>
      <text class="input-hint">{{surfaceTypeHint}}</text>
    </view>

    <!-- è·¯é¢å¹²æ¹¿é€‰æ‹© -->
    <view class="input-group">
      <text class="input-label">è·¯é¢å¹²æ¹¿çŠ¶å†µ</text>
      <view class="picker-container">
        <picker 
          bindchange="onWetConditionChange" 
          value="{{selectedWetCondition}}" 
          range="{{wetConditions}}" 
          range-key="name"
        >
          <view class="picker-display">
            <text>{{wetConditions[selectedWetCondition].name}}</text>
            <text class="picker-arrow">â–¼</text>
          </view>
        </picker>
      </view>
      <text class="input-hint">{{wetConditions[selectedWetCondition].description}}</text>
    </view>

    <!-- è½®èƒå®½åº¦é€‰æ‹© -->
    <view class="input-group">
      <text class="input-label">è½®èƒå®½åº¦ (mm)</text>
      <view class="picker-container">
        <picker 
          bindchange="onTireWidthChange" 
          value="{{selectedTireWidth}}" 
          range="{{tireWidths}}" 
          range-key="name"
        >
          <view class="picker-display">
            <text>{{tireWidths[selectedTireWidth].name}}</text>
            <text class="picker-arrow">â–¼</text>
          </view>
        </picker>
      </view>
      <text class="input-hint">{{tireWidthHint}}</text>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’®åŒºåŸŸ -->
  <view class="action-section">
    <button 
      class="calculate-btn {{calculating ? 'calculating' : ''}}" 
      bindtap="performCalculation"
      disabled="{{calculating}}"
    >
      <text wx:if="{{!calculating}}">è®¡ç®—èƒå‹</text>
      <text wx:else>è®¡ç®—ä¸­...</text>
    </button>
    
    <button 
      class="reset-btn" 
      bindtap="resetCalculation"
      wx:if="{{calculated}}"
    >
      é‡æ–°è®¡ç®—
    </button>
  </view>

  <!-- è®¡ç®—ç»“æœåŒºåŸŸ -->
  <view class="result-section" wx:if="{{calculated}}">
    <view class="section-title">æ¨èèƒå‹</view>
    
    <view class="pressure-results">
      <view class="pressure-item front">
        <view class="pressure-label">å‰è½®</view>
        <view class="pressure-value">{{frontPressure}}</view>
        <view class="pressure-unit">PSI</view>
      </view>
      
      <view class="pressure-divider"></view>
      
      <view class="pressure-item rear">
        <view class="pressure-label">åè½®</view>
        <view class="pressure-value">{{rearPressure}}</view>
        <view class="pressure-unit">PSI</view>
      </view>
    </view>

    <!-- å»ºè®®è¯´æ˜ -->
    <view class="advice-section">
      <view class="advice-title">ğŸ’¡ ä¸“ä¸šå»ºè®®</view>
      <view class="advice-content">
        æ ¹æ®æ‚¨çš„éª‘è¡Œæ¡ä»¶ï¼Œå»ºè®®å‰è½®ä½¿ç”¨ {{frontPressure}} PSIï¼Œåè½®ä½¿ç”¨ {{rearPressure}} PSIã€‚
        è¿™ä¸ªå‹åŠ›è®¾ç½®èƒ½åœ¨èˆ’é€‚æ€§å’Œæ€§èƒ½ä¹‹é—´å–å¾—æœ€ä½³å¹³è¡¡ã€‚
      </view>
    </view>
  </view>

  <!-- ä½¿ç”¨è¯´æ˜ -->
  <view class="tips-section">
    <view class="section-title">ä½¿ç”¨è¯´æ˜</view>
    <view class="tips-content">
      <view class="tip-item">
        <text class="tip-icon">ğŸ“</text>
        <text class="tip-text">è¾“å…¥å‡†ç¡®çš„ä½“é‡å’Œè½®èƒè§„æ ¼ä»¥è·å¾—æœ€ä½³è®¡ç®—ç»“æœ</text>
      </view>
      <view class="tip-item">
        <text class="tip-icon">ğŸ›£ï¸</text>
        <text class="tip-text">æ ¹æ®å®é™…éª‘è¡Œè·¯é¢é€‰æ‹©åˆé€‚çš„è·¯é¢ç±»å‹</text>
      </view>
      <view class="tip-item">
        <text class="tip-icon">âš–ï¸</text>
        <text class="tip-text">å¯æ ¹æ®ä¸ªäººå–œå¥½åœ¨æ¨èå€¼åŸºç¡€ä¸Šå¾®è°ƒ Â±5 PSI</text>
      </view>
      <view class="tip-item">
        <text class="tip-icon">ğŸ”§</text>
        <text class="tip-text">å®šæœŸæ£€æŸ¥èƒå‹ï¼Œç¡®ä¿éª‘è¡Œå®‰å…¨å’Œæ€§èƒ½</text>
      </view>
    </view>
  </view>
  </view>

  <!-- å·¥å…·2åˆ†é¡µ -->
  <view class="tab-content" wx:if="{{currentTab === 'tool2'}}">
    <view class="empty-tab">
      <view class="empty-icon">ğŸ”§</view>
      <view class="empty-title">å·¥å…·2</view>
      <view class="empty-subtitle">æ•¬è¯·æœŸå¾…æ›´å¤šå®ç”¨å·¥å…·</view>
    </view>
  </view>

  <!-- å·¥å…·3åˆ†é¡µ -->
  <view class="tab-content" wx:if="{{currentTab === 'tool3'}}">
    <view class="empty-tab">
      <view class="empty-icon">âš™ï¸</view>
      <view class="empty-title">å·¥å…·3</view>
      <view class="empty-subtitle">æ•¬è¯·æœŸå¾…æ›´å¤šå®ç”¨å·¥å…·</view>
    </view>
  </view>
</view>
