<view class="container">
  <block wx:if="{{!isAdmin}}">
    <view class="no-access-card">
      <view class="no-access-icon">ğŸ”’</view>
      <view class="no-access-title">æƒé™ä¸è¶³</view>
      <view class="no-access-desc">åªæœ‰ç®¡ç†å‘˜æ‰èƒ½è®¿é—®æ­¤é¡µé¢</view>
    </view>
  </block>
  <block wx:else>
    <view class="page-header">
      <text class="page-title">è®­ç»ƒè¥ç»Ÿè®¡</text>
      <text class="summary-inline">æ€»äººæ•° {{totalCount}}</text>
      <button class="export-btn" bindtap="onExport" disabled="{{loading || list.length===0}}">å¯¼å‡ºCSV</button>
    </view>
    <view class="grid-container">
      <block wx:for="{{list}}" wx:key="_openid">
        <view class="grid-item">
          <image class="grid-avatar" src="{{item.avatarUrl || '/images/default-avatar.png'}}"></image>
          <view class="grid-info">
            <text class="grid-name">{{item.nickName}}</text>
            <text class="grid-meta">{{item.weeksCompleted}}å‘¨ï½œ{{item.avgCompletionRate}}%</text>
          </view>
        </view>
      </block>
      <view class="empty" wx:if="{{list.length===0 && !loading}}">
        <text>æš‚æ— å‚ä¸è€…æ•°æ®</text>
      </view>
    </view>
  </block>
</view>
