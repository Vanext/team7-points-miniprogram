<view class="container">
  <block wx:if="{{!isAdmin}}">
    <view class="no-access-card">
      <view class="no-access-icon">ğŸ”’</view>
      <view class="no-access-title">æƒé™ä¸è¶³</view>
      <view class="no-access-desc">åªæœ‰ç®¡ç†å‘˜æ‰èƒ½è®¿é—®æ­¤é¡µé¢</view>
    </view>
  </block>
  <block wx:else>
    <view class="list-header">
      <view class="header-info">
        <text class="section-title">è®­ç»ƒè¥ç”³è¯·</text>
        <view class="member-count-badge">{{list.length}}</view>
      </view>
      <view class="sort-actions">
        <button class="sort-btn {{currentTab==='pending'?'active':''}}" bindtap="onTabChange" data-id="pending">å¾…å®¡æ ¸</button>
        <button class="sort-btn {{currentTab==='approved'?'active':''}}" bindtap="onTabChange" data-id="approved">å·²é€šè¿‡</button>
        <button class="sort-btn {{currentTab==='rejected'?'active':''}}" bindtap="onTabChange" data-id="rejected">å·²æ‹’ç»</button>
      </view>
    </view>

    <view class="members-grid">
      <block wx:for="{{list}}" wx:key="_id">
        <view class="member-card">
          <view class="card-header">
            <view class="user-block">
              <view class="name-line">
                <text class="user-name">{{item.nickName || 'å¾®ä¿¡ç”¨æˆ·'}}</text>
                <text class="badge {{item.status}}">{{item.status === 'pending' ? 'å¾…å®¡æ ¸' : (item.status==='approved' ? 'å·²é€šè¿‡' : 'å·²æ‹’ç»')}}</text>
              </view>
            </view>
            <view class="metrics">
              <view class="points-row">
                <text class="points-label">ç”³è¯·æ—¶é—´</text>
                <text class="points-value">{{item.applyTimeText}}</text>
              </view>
            </view>
          </view>
          <view class="card-actions actions-grid">
            <button class="action-btn admin-btn {{currentTab==='pending'?'add':'remove'}}" wx:if="{{currentTab==='pending'}}" data-id="{{item._id}}" bindtap="approve">é€šè¿‡</button>
            <button class="action-btn lock-btn lock" wx:if="{{currentTab==='pending'}}" data-id="{{item._id}}" bindtap="reject">æ‹’ç»</button>
            <button class="action-btn lock-btn remove" wx:if="{{currentTab==='approved'}}" data-id="{{item._id}}" bindtap="cancelApproved">å–æ¶ˆé€šè¿‡</button>
          </view>
        </view>
      </block>
    </view>
  </block>
</view>
